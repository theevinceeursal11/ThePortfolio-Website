<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Client Support Form</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
  body {
  background-color: #e8ebef;
  font-family: 'Inter', sans-serif;
  padding-top: 60px;
  color: #2d2f32;
  transition: background-color 0.3s ease;
}

.form-wrapper {
  max-width: 720px;
  margin: auto;
  padding: 30px 20px;
}

.form-card {
  background: #ffffff;
  padding: 3rem;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.07);
  transition: all 0.3s ease;
}

.form-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.09);
}

h3, h5 {
  font-weight: 600;
  color: #0d1b2a;
}

input, textarea, select {
  border-radius: 12px !important;
  border: 1px solid #d0d5dc;
  transition: border 0.2s ease;
}

input:focus, textarea:focus {
  border-color: #0d6efd;
  box-shadow: none;
}

.radio-group {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.radio-group input[type="radio"] {
  display: none;
}

.radio-group label {
  padding: 1rem 1.2rem;
  border: 1px solid #cfd3da;
  border-radius: 14px;
  cursor: pointer;
  background: #f9fafb;
  transition: all 0.3s ease;
  font-size: 0.96rem;
}

.radio-group input[type="radio"]:checked + label {
  border-color: #0d6efd;
  background: #eaf2ff;
  font-weight: 500;
  color: #0d6efd;
}

.form-actions {
  display: flex;
  justify-content: space-between;
  margin-top: 2rem;
}

.form-actions button {
  padding: 0.7rem 1.6rem;
  border: none;
  border-radius: 10px;
  background-color: #0d6efd;
  color: #fff;
  font-weight: 500;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(13, 110, 253, 0.2);
}

.form-actions button:hover {
  background-color: #095edb;
  transform: translateY(-1px);
}

.step-page {
  display: none;
  animation: fadeIn 0.4s ease-in-out;
}

.step-page.active {
  display: block;
}

.modal {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.55);
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal.active {
  display: flex;
}

.modal-content {
  background: #fff;
  padding: 2.5rem;
  border-radius: 20px;
  text-align: center;
  max-width: 500px;
  width: 90%;
  box-shadow: 0 10px 28px rgba(0, 0, 0, 0.1);
  animation: fadeIn 0.4s ease;
}

.back-arrow {
  width: 42px;
  height: 42px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  text-decoration: none;
  color: #333;
  border: 1px solid #ccc;
  margin-bottom: 1rem;
  transition: all 0.3s ease;
  background: #fff;
}

.back-arrow:hover {
  background: #f0f0f0;
  transform: scale(1.05);
}

.error-card {
  background-color: #fff3f3;
  border: 1px solid #f5c2c7;
  color: #842029;
  border-radius: 12px;
  padding: 1rem 1.5rem;
  margin-bottom: 1rem;
  display: none;
  align-items: center;
  gap: 0.75rem;
  font-size: 0.95rem;
  box-shadow: 0 4px 12px rgba(255, 0, 0, 0.05);
}

.error-card i {
  font-size: 1.2rem;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

  </style>
</head>
<body>

<div class="form-wrapper">
  <div class="form-card">
    <a href="index.html" class="back-arrow">‚Üê</a>
    <div id="errorCard" class="error-card" style="display: none;">
  <i class="bi bi-exclamation-circle-fill"></i>
  <span id="errorMessage">Please fill out all required fields before proceeding.</span>
</div>

    <h3 class="text-center">Client Support Form</h3>
    
    <form id="clientForm" name="clientForm">
      <!-- Step 1 -->
      <div class="step-page active" id="step1">
        <h5>Client Information</h5>
        <div class="form-group mb-3">
          <label for="clientName" class="form-label">Full Name</label>
          <input type="text" class="form-control" id="clientName" name="client_name" required />
        </div>
        <div class="form-group mb-3">
          <label for="clientEmail" class="form-label">Email</label>
          <input type="email" class="form-control" id="clientEmail" name="client_email" required />
        </div>
        <div class="form-group mb-3">
          <label for="clientPhone" class="form-label">Phone</label>
          <input type="tel" class="form-control" id="clientPhone" name="client_phone" pattern="[0-9]{11}" required />
        </div>
        <div class="form-group mb-3">
          <label for="clientAddress" class="form-label">Address</label>
          <input type="text" class="form-control" id="clientAddress" name="client_address" required />
        </div>
        <div class="form-actions justify-content-end">
          <button type="button" class="btn btn-primary" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 2 -->
      <div class="step-page" id="step2">
        <h5>What services are you looking for?</h5>
        <div class="radio-group">
          <input type="radio" id="s1" name="support_type" value="Website/App" required>
          <label for="s1">Website or App</label>
          <input type="radio" id="s2" name="support_type" value="Other" required>
          <label for="s2">Other</label>
        </div>
        <div class="form-group" id="otherServiceInput" style="display:none;">
          <label for="otherService">Specify Other Service</label>
          <input type="text" class="form-control" id="otherService" name="other_service" />
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
          <button type="button" class="btn btn-primary" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 3 -->
      <div class="step-page" id="step3">
        <h5>Project & Goal</h5>
        <div class="form-group">
          <label for="description">Describe the Project</label>
          <textarea class="form-control" id="description" name="project_description" rows="3" required></textarea>
        </div>
        <div class="form-group">
          <label for="goal">Goal</label>
          <textarea class="form-control" id="goal" name="project_goal" rows="3" required></textarea>
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
          <button type="button" class="btn btn-primary" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 4 -->
      <div class="step-page" id="step4">
        <h5>Project Stage</h5>
        <div class="radio-group">
          <input type="radio" id="st1" name="project_stage" value="Planning" required><label for="st1">Planning</label>
          <input type="radio" id="st2" name="project_stage" value="Development" required><label for="st2">Development</label>
          <input type="radio" id="st3" name="project_stage" value="Testing" required><label for="st3">Testing</label>
          <input type="radio" id="st4" name="project_stage" value="Not Started" required><label for="st4">Not Yet Started</label>
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
          <button type="button" class="btn btn-primary" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 5 -->
      <div class="step-page" id="step5">
        <h5>Budget & Timeline</h5>
        <div class="form-group">
          <label for="budget">Budget (USD)</label>
          <input type="number" class="form-control" id="budget" name="project_budget" required />
        </div>
        <div class="form-group">
          <label for="timeline">Timeline</label>
          <input type="text" class="form-control" id="timeline" name="project_timeline" required />
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
          <button type="button" class="btn btn-primary" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 6 -->
      <div class="step-page" id="step6">
        <h5>Meeting Platform</h5>
        <div class="radio-group">
          <input type="radio" id="p1" name="meeting_platform" value="Zoom" required><label for="p1">Zoom</label>
          <input type="radio" id="p2" name="meeting_platform" value="Google Meet" required><label for="p2">Google Meet</label>
          <input type="radio" id="p3" name="meeting_platform" value="In-person" required><label for="p3">In-person</label>
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
          <button type="button" class="btn btn-primary" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 7 -->
      <div class="step-page" id="step7">
        <h5>Payment Method</h5>
        <div class="radio-group">
          <input type="radio" id="m1" name="payment_method" value="Paypal" required><label for="m1">PayPal</label>
          <input type="radio" id="m2" name="payment_method" value="Cash" required><label for="m2">Cash</label>
          <input type="radio" id="m3" name="payment_method" value="Card" required><label for="m3">Credit Card</label>
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
          <button type="button" class="btn btn-primary" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 8 -->
      <div class="step-page" id="step8">
        <h5>Extra Notes</h5>
        <div class="form-group">
          <label for="extraNote">Any additional notes?</label>
          <textarea class="form-control" id="extraNote" name="extra_notes" rows="3"></textarea>
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
          <button type="button" class="btn btn-success" onclick="submitForm()">Submit</button>
        </div>
      </div>
    </form>

    <!-- Modal -->
    <div id="thankYouModal" class="modal">
      <div class="modal-content">
        <h4>üéâ Thank You for Choosing Us!</h4>
        <p>Your submission has been received. We'll get back to you soon.</p>
        <a href="index.html" class="btn btn-primary mt-3">Close</a>
      </div>
    </div>
  </div>
</div>
<div id="errorCard" class="error-card" style="display: none;">
  <i class="bi bi-exclamation-circle-fill"></i>
  <span id="errorMessage">Please fill out all required fields before proceeding.</span>
</div>

<!-- EmailJS SDK -->
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
  emailjs.init({ publicKey: "PgmzswxhF6JqVnT7t" });

let currentStep = 1;
const totalSteps = 8;

function updateStepDisplay() {
  for (let i = 1; i <= totalSteps; i++) {
    const step = document.getElementById('step' + i);
    if (step) step.classList.remove('active');
  }
  const activeStep = document.getElementById('step' + currentStep);
  if (activeStep) activeStep.classList.add('active');
}

function nextStep() {
  if (!validateStep(currentStep)) {
    document.getElementById('errorMessage').innerText = '‚ö†Ô∏è Please fill in all required fields.';
    document.getElementById('errorCard').style.display = 'flex';
    return;
  } else {
    document.getElementById('errorCard').style.display = 'none';
  }

  if (currentStep < totalSteps) {
    currentStep++;
    updateStepDisplay();
  }
}

function prevStep() {
  if (currentStep > 1) {
    currentStep--;
    updateStepDisplay();
  }
}

function validateStep(step) {
  const stepElement = document.getElementById('step' + step);
  const requiredInputs = stepElement.querySelectorAll('input[required], textarea[required]');
  let isValid = true;

  requiredInputs.forEach(input => {
    if (!input.value.trim()) isValid = false;
  });

  if ([2, 4, 6, 7].includes(step)) {
    const radioChecked = stepElement.querySelector('input[type="radio"]:checked');
    if (!radioChecked) isValid = false;
  }

  if (step === 2) {
    const isOther = document.getElementById('s2')?.checked;
    const otherValue = document.getElementById('otherService')?.value;
    if (isOther && (!otherValue || otherValue.trim() === '')) {
      isValid = false;
    }
  }

  return isValid;
}

function submitForm() {
  if (!validateStep(currentStep)) {
    document.getElementById('errorMessage').innerText = '‚ö†Ô∏è Please complete all required fields.';
    document.getElementById('errorCard').style.display = 'flex';
    return;
  } else {
    document.getElementById('errorCard').style.display = 'none';
  }

  emailjs.sendForm('service_kwphhnd', 'template_x80l3ji', document.getElementById('clientForm'))
    .then(() => {
      document.getElementById('thankYouModal').classList.add('active');
      document.getElementById('clientForm').reset();
      currentStep = 1;
      updateStepDisplay();
    })
    .catch((error) => {
      console.error('‚ùå EmailJS Error:', error);
      alert('‚ùå Failed to send: ' + (error.text || 'An error occurred.'));
    });
}

window.onload = () => {
  updateStepDisplay();

  // Remove localStorage block check here (allowed multiple submissions)

  document.getElementById('s2')?.addEventListener('change', () => {
    document.getElementById('otherServiceInput').style.display = 'block';
  });

  document.getElementById('s1')?.addEventListener('change', () => {
    document.getElementById('otherServiceInput').style.display = 'none';
  });
};

</script>


</body>
</html>
